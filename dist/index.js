"use strict";class c{routes=[];root="/";constructor(t="/"){this.root=t,addEventListener("popstate",this.check),document.addEventListener("click",this.handleLinkClick)}add(t,e){return this.routes.push({path:t,cb:e}),this}realPath(t){return this.root+t.replace(this.root,"")}pathCheck(t,e){const a=t.split("/").filter(Boolean),r=this.realPath(e).split("/").filter(Boolean);return a.length!==r.length?!1:a.every((n,s)=>r[s][0]===":"||n===r[s])}check(){const t=this.routes.find(e=>{const{path:a}=e;return this.pathCheck(location.pathname,a)||a==="_404"});if(t){const{path:e,cb:a}=t,r=location.pathname.split("/").filter(Boolean),s=this.realPath(e).split("/").filter(Boolean).reduce((i,o,h)=>(o[0]===":"&&(i[o.slice(1)]=r[h]),i),{});a(s)}}navigate(t=""){history.pushState(null,"",t),this.check()}handleLinkClick=t=>{const e=t.target;if(e.tagName==="A"){t.preventDefault();const a=e.pathname;this.navigate(this.realPath(a))}}}export{c as Router};
